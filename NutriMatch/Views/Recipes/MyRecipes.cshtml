@model List<Recipe>
@{
    ViewData["Title"] = "My Recipes";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<link href="~/css/MyRecipes.css" rel="stylesheet">
<body>
    <div class="container mt-5">
        <div class="header-section">
            <h1>My Recipes</h1>
            <p>Manage and showcase your culinary creations. Share your favorite dishes with the NutriMatch community.
            </p>
            <a href="/Recipes/Create" class="create-recipe-btn">+ Create New Recipe</a>
        </div>
        <div class="stats-section">
            <div class="stat-card">
                <div class="stat-number">@Model.Count</div>
                <div class="stat-label">Total Recipes</div>
            </div>
            <div class="stat-card">
                <div class="stat-number">@ViewBag.AverageRating</div>
                <div class="stat-label">Avg Rating</div>
            </div>
        </div>
        @if (Model != null && Model.Any())
        {
            <div class="recipe-grid" id="recipeGrid">
                @foreach (var recipe in Model)
                {
                    <div class="recipe-card" onclick="showRecipeDetails(@recipe.Id,true,'@recipe.RecipeStatus')"
                        data-calories="@recipe.Calories" data-protein="@recipe.Protein" data-carbs="@recipe.Carbs"
                        data-fat="@recipe.Fat">
                        <img src="@recipe.ImageUrl" alt="@recipe.Title" class="recipe-image">
                        <div class="badge">
                            @if (recipe.RecipeStatus == "Pending")
                            {
                                <span class="badge bg-warning">
                                    <i class="fas fa-clock me-1"></i>Pending
                                </span>
                            }
                            else if (recipe.RecipeStatus == "Accepted")
                            {
                                <span class="badge bg-success">
                                    <i class="fas fa-check me-1"></i>Accepted
                                </span>
                            }
                            else if (recipe.RecipeStatus == "Declined")
                            {
                                <span class="badge bg-danger">
                                    <i class="fas fa-times me-1"></i>Declined
                                </span>
                            }
                        </div>
                        <div class="recipe-content">
                            <h3 class="recipe-title">@(recipe.Title.Length > 30
                                                        ? recipe.Title.Substring(0, 30) + "‚Ä¶"
                                                        : recipe.Title)</h3>
                            <div class="recipe-meta">
                                <span class="rating">
                                    <i class="fas fa-star"></i> @recipe.Rating
                                </span>
                                <span>
                                    <i class="fas fa-user"></i>
                                    @(recipe.User.UserName.Length > 23
                                                                ? recipe.User.UserName.Substring(0, 23) + "‚Ä¶"
                                                                : recipe.User.UserName)
                                </span>
                            </div>
                            <div class="recipe-macros">
                                <div class="macro-item">
                                    <div class="macro-value">@recipe.Calories</div>
                                    <div class="macro-label">Cal</div>
                                </div>
                                <div class="macro-item">
                                    <div class="macro-value">@recipe.Protein</div>
                                    <div class="macro-label">Protein</div>
                                </div>
                                <div class="macro-item">
                                    <div class="macro-value">@recipe.Carbs</div>
                                    <div class="macro-label">Carbs</div>
                                </div>
                                <div class="macro-item">
                                    <div class="macro-value">@recipe.Fat</div>
                                    <div class="macro-label">Fats</div>
                                </div>
                            </div>
                        </div>
                    </div>
                }
            </div>
        }
        else
        {
            <div class="empty-state">
                <div class="empty-icon">üë®‚Äçüç≥</div>
                <h3 class="empty-title">No Recipes Yet</h3>
                <p class="empty-text">Start creating your first recipe and share your culinary masterpieces with the
                    community!</p>
                <a href="/Recipes/Create" class="create-recipe-btn">Create Your First Recipe</a>
            </div>
        }
    </div>
    <div id="modalWindow"></div>
    <div id="modalWindowDelete"></div>
    <script src="~/js/MyRecipes.js"></script>
</body>