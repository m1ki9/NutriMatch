@model NutriMatch.Models.HomeViewModel
<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NutriMatch - Your Recipe Journey</title>
    <link href="~/css/HomeIndex.css" rel="stylesheet">
</head>
<body>
    @if (!User.Identity.IsAuthenticated){
        <section class="signup-section" style="margin-top: 200px;">
            <div class="floating-elements">
                <i class="fas fa-leaf floating-leaf" style="top: 10%; left: 15%; font-size: 2rem;"></i>
                <i class="fas fa-seedling floating-leaf" style="top: 60%; right: 20%; font-size: 1.5rem; animation-delay: -2s;"></i>
                <i class="fas fa-leaf floating-leaf" style="top: 30%; right: 10%; font-size: 2.5rem; animation-delay: -4s;"></i>
            </div>
            <div class="container">
                <div class="row align-items-center">
                    <div class="daily-dish col-lg-6">
                        <h1 class="signup-title">Create your account</h1>
                        <h2 class="signup-subtitle">Optimize Your Nutrition</h2>
                        <p class="signup-description">
                            Join our macro-focused recipe platform designed for goal-oriented eating. <br/>
                            As a member, you can
                            create and manage your own recipes,
                            rate and review meals from the community,
                            save your favorite dishes for quick access and
                            filter recipes by macronutrient profiles that align with your dietary needs
                        </p>
                        <button class="btn btn-primary-custom">
                            Sign up
                        </button>
                        <p class="mt-3 text-muted">Already have an account? <a href="#" style="color: var(--primary-green); text-decoration: none;">Log in</a></p>
                    </div>
                    <div class="col-lg-4 text-center">
                        <div class="position-relative">
                            <img src="https://images.unsplash.com/photo-1546069901-ba9599a7e63c?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80" 
                                alt="Delicious Food Bowl" class="img-fluid rounded-circle" style="width: 300px; height: 300px; object-fit: cover; box-shadow: 0 20px 40px rgba(0,0,0,0.2);">
                            <div class="position-absolute" style="top: 20px; right: 20px; background: white; border-radius: 50px; padding: 8px 15px; box-shadow: 0 5px 15px rgba(0,0,0,0.1);">
                                <div class="d-flex align-items-center gap-2">
                                    <img src="https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?ixlib=rb-4.0.3&auto=format&fit=crop&w=50&q=80" 
                                        alt="Chef" class="rounded-circle" style="width: 30px; height: 30px; object-fit: cover;">
                                    <div>
                                        <small class="fw-bold text-dark d-block">Chef John</small>
                                        <div class="text-warning" style="font-size: 12px;">
                                            <i class="fas fa-star"></i>
                                            <i class="fas fa-star"></i>
                                            <i class="fas fa-star"></i>
                                            <i class="fas fa-star"></i>
                                            <i class="fas fa-star"></i>
                                        </div>
                                    </div>
                                </div>
                                <small class="text-muted d-block mt-1">  </small>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    }
    else{
       <section class="welcome-back-section" style="margin-top: 100px; margin-bottom: 100px; position: relative;">
    <div class="floating-elements">
        <i class="fas fa-leaf floating-leaf" style="position: absolute; top: 15%; left: 8%; font-size: 1.5rem; color: rgba(76, 175, 80, 0.1); animation: float 8s ease-in-out infinite;"></i>
        <i class="fas fa-seedling floating-leaf" style="position: absolute; top: 70%; right: 12%; font-size: 1.2rem; color: rgba(76, 175, 80, 0.08); animation: float 10s ease-in-out infinite; animation-delay: -3s;"></i>
        <i class="fas fa-apple-alt floating-leaf" style="position: absolute; bottom: 20%; left: 15%; font-size: 1.3rem; color: rgba(76, 175, 80, 0.06); animation: float 12s ease-in-out infinite; animation-delay: -6s;"></i>
    </div>
    <div class="container">
        <div class="row align-items-center">
            <div class="col-lg-8">
                <div class="welcome-content">
                    <h1 class="welcome-title" style="color: #2c3e50; font-size: 2.8rem; font-weight: 700; margin-bottom: 16px; line-height: 1.2;">
                        Welcome back, 
                        <br>
                        <span style="color: #4CAF50;">@User.Identity.Name</span>! 
                        <span style="font-size: 2rem;">👋</span>
                    </h1>
                    <p class="welcome-subtitle" style="color: #64748b; font-size: 1.2rem; font-weight: 400; margin-bottom: 32px; max-width: 600px; line-height: 1.6;">
                        Your personalized nutrition journey continues. Ready to discover delicious, macro-friendly recipes that align with your goals?
                    </p>
                    <div class="welcome-actions" style="display: flex; gap: 16px; align-items: center; flex-wrap: wrap;">
                        <a href="/Recipes" class="btn btn-outline" style="background: transparent; color: #4CAF50; padding: 14px 28px; border-radius: 8px; text-decoration: none; font-weight: 500; font-size: 0.95rem; transition: all 0.2s ease; border: 1px solid #4CAF50; display: inline-flex; align-items: center;">
                            <i class="fas fa-search" style="margin-right: 8px; font-size: 0.9rem;"></i>
                            Browse Recipes
                        </a>
                    </div>
                </div>
            </div>
            <div class="col-lg-4">
                <div class="user-summary-card" style="background: white; border-radius: 16px; padding: 32px; box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08); border: 1px solid rgba(0, 0, 0, 0.05); position: relative;">
                     <div class="user-avatar" style="width: 64px; height: 64px; border-radius: 50%; margin: 0 auto 20px; display: flex; align-items: center; justify-content: center; font-size: 1.5rem; color: white; font-weight: 700; overflow: hidden; position: relative;">
                        @if (!string.IsNullOrEmpty(ViewBag.UserPicture as string))
                        {
                            <img src="@ViewBag.UserPicture" 
                                alt="@(ViewBag.UserName ?? User.Identity.Name)" 
                                style="width: 100%; height: 100%; object-fit: cover; border-radius: 50%;" />
                        }
                        else
                        {
                            <div style="background: linear-gradient(135deg, #4CAF50, #45a049); width: 100%; height: 100%; display: flex; align-items: center; justify-content: center; border-radius: 50%;">
                                @if (!string.IsNullOrEmpty(User.Identity.Name))
                                {
                                    @User.Identity.Name.Substring(0, 1).ToUpper()
                                }
                                else
                                {
                                    <i class="fas fa-user"></i>
                                }
                            </div>
                        }
                    </div>
                    <div class="text-center mb-24">
                        <h3 style="color: #2c3e50; font-size: 1.3rem; font-weight: 600; margin-bottom: 4px;">@User.Identity.Name</h3>
                    </div>
                    <div class="stats-grid" style="display: flex; justify-content: center; gap: 3rem; text-align: center;">
                        <div class="stat-item">
                            <div style="color: #4CAF50; font-size: 1.6rem; font-weight: 700; margin-bottom: 4px;">@ViewBag.UserRecipesCount</div>
                            <div style="color: #64748b; font-size: 0.8rem; font-weight: 500;">Recipes</div>
                        </div>
                        <div class="stat-item">
                            <div style="color: #ff9500; font-size: 1.6rem; font-weight: 700; margin-bottom: 4px;">@ViewBag.AverageRating</div>
                            <div style="color: #64748b; font-size: 0.8rem; font-weight: 500;">Rating</div>
                        </div>
                    </div>
                    <div class="quick-action" style="margin-top: 28px; padding-top: 24px; border-top: 1px solid rgba(0, 0, 0, 0.06);">
                        <a href="Recipes/MyRecipes" style="display: flex; align-items: center; justify-content: between; color: #4CAF50; text-decoration: none; font-weight: 500; font-size: 0.9rem; transition: color 0.2s ease;">
                            <span>View My Recipes</span>
                            <i class="fas fa-arrow-right" style="margin-left: auto; font-size: 0.8rem;"></i>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
    }
    <section class="share-recipe-section">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-lg-6">
                    <div class="sample-recipe">
                        <div class="sample-screen">
                            <div class="text-center mb-3">
                                <img src="https://images.unsplash.com/photo-1567620905732-2d1ec7ab7445?ixlib=rb-4.0.3&auto=format&fit=crop&w=300&q=80" 
                                     alt="Recipe" class="img-fluid rounded" style="width: 100%; height: 150px; object-fit: cover;">
                            </div>
                            <h6 class="fw-bold mb-2">Protein pancakes</h6>
                            <div class="d-flex justify-content-between align-items-center mb-2">
                                <small class="text-muted">By Kire the chef</small>
                                <div class="text-warning" style="font-size: 12px;">
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-lg-6">
                    <h2 class="share-title">Share Your Recipes</h2>
                    <p class="share-description">
                        Have a recipe that fits your nutrition goals? Share it with the community and help others discover meals that balance flavor and function. Whether it’s high-protein, low-carb, or macro-balanced — your creations make a difference.
                    </p>
                    <a href="/Recipes/Create" class="btn btn-create-recipe">
                        Create New Recipe
                    </a>
                </div>
            </div>
        </div>
    </section>
    <section class="trending-section">
        <div class="container">
            <h2 class="section-title">Trending Foods</h2>
            <p class="section-subtitle">Discover the most popular recipes shared by our community</p>
            <div class="row">
                @foreach (var recipe in Model.Recipes){ 
                    <div class="col-md-6 col-lg-4">
                        <div class="recipe-card">
                            <img src="@recipe.ImageUrl" class="recipe-image">
                            <div class="recipe-content">
                                <h3 class="recipe-title">@recipe.Title</h3>
                                <div class="recipe-meta">
                                    <span class="rating">
                                        <i class="fas fa-star"></i> @recipe.Rating
                                    </span>
                                    <span>
                                        <i class="fas fa-user"></i>
                                        @(recipe.User.UserName.Length > 23 
                                            ? recipe.User.UserName.Substring(0, 23) + "…" 
                                            : recipe.User.UserName)
                                    </span>
                                    <span><i class="fas fa-calendar"> </i> @recipe.CreatedAt.ToString("MMM dd, yyyy")</span>
                                </div>
                                <div class="calories-info">
                                    <div class="recipe-macros">
                                        <div class="macro-item">
                                            <div class="macro-value">@recipe.Calories</div>
                                            <div class="macro-label">Cal</div>
                                        </div>
                                        <div class="macro-item">
                                            <div class="macro-value">@recipe.Protein</div>
                                            <div class="macro-label">Protein</div>
                                        </div>
                                        <div class="macro-item">
                                            <div class="macro-value">@recipe.Carbs</div>
                                            <div class="macro-label">Carbs</div>
                                        </div>
                                        <div class="macro-item">
                                            <div class="macro-value">@recipe.Fat</div>
                                            <div class="macro-label">Fats</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="nutrition-overlay">
                                <div class="nutrition-content">
                                    <h4>Nutrition Facts</h4>
                                    <div class="nutrition-grid">
                                        <div class="nutrition-item">
                                            <span class="nutrition-label">Calories</span>
                                            <span class="nutrition-value">@recipe.Calories</span>
                                        </div>
                                        <div class="nutrition-item">
                                            <span class="nutrition-label">Protein</span>
                                            <span class="nutrition-value">@recipe.Protein</span>
                                        </div>
                                        <div class="nutrition-item">
                                            <span class="nutrition-label">Carbs</span>
                                            <span class="nutrition-value">@recipe.Carbs</span>
                                        </div>
                                        <div class="nutrition-item">
                                            <span class="nutrition-label">Fats</span>
                                            <span class="nutrition-value">@recipe.Fat</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                }
            </div>
        </div>
    </section>
    <section class="restaurants-section">
        <div class="container">
            <h2 class="section-title">Popular Restaurants</h2>
            <p class="section-subtitle">Explore the most popular restaurants with delicious options</p>
        </div>
        <div class="container">
            <div class="restaurants-container" onclick="window.location.href='@Url.Action("Index", "Restaurants")'" style="cursor: pointer;">
                @foreach(var restaurant in Model.Restaurants){
                    <div class="restaurant-card">
                        <div class="restaurant-logo" style="background: display: flex; align-items: center; justify-content: center; font-size: 1.5rem; color: white; font-weight: bold;">
                            <img src="@restaurant.ImageUrl" style="width: 70px;">
                        </div>
                        <div class="restaurant-name">@restaurant.Name</div>
                        <div class="restaurant-items">@restaurant.Description</div>
                    </div>
                }
            </div>
        </div>
    </section>    
</body>
   